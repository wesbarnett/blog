<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Create a venv for a Jupyter kernel | Wes Barnett, PhD</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Create a venv for a Jupyter kernel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to quickly setup a virtual environment for use as a Jupyter kernel" />
<meta property="og:description" content="How to quickly setup a virtual environment for use as a Jupyter kernel" />
<link rel="canonical" href="https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html" />
<meta property="og:url" content="https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html" />
<meta property="og:site_name" content="Wes Barnett, PhD" />
<meta property="og:image" content="https://barnett.science/images/venv.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-22T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"How to quickly setup a virtual environment for use as a Jupyter kernel","mainEntityOfPage":{"@type":"WebPage","@id":"https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html"},"@type":"BlogPosting","url":"https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html","headline":"Create a venv for a Jupyter kernel","dateModified":"2020-05-22T00:00:00-05:00","datePublished":"2020-05-22T00:00:00-05:00","image":"https://barnett.science/images/venv.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://barnett.science/feed.xml" title="Wes Barnett, PhD" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Create a venv for a Jupyter kernel | Wes Barnett, PhD</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Create a venv for a Jupyter kernel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to quickly setup a virtual environment for use as a Jupyter kernel" />
<meta property="og:description" content="How to quickly setup a virtual environment for use as a Jupyter kernel" />
<link rel="canonical" href="https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html" />
<meta property="og:url" content="https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html" />
<meta property="og:site_name" content="Wes Barnett, PhD" />
<meta property="og:image" content="https://barnett.science/images/venv.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-22T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"How to quickly setup a virtual environment for use as a Jupyter kernel","mainEntityOfPage":{"@type":"WebPage","@id":"https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html"},"@type":"BlogPosting","url":"https://barnett.science/deeplearning/2020/05/22/jupyter-kernel.html","headline":"Create a venv for a Jupyter kernel","dateModified":"2020-05-22T00:00:00-05:00","datePublished":"2020-05-22T00:00:00-05:00","image":"https://barnett.science/images/venv.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@500&display=swap" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://barnett.science/feed.xml" title="Wes Barnett, PhD" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Wes Barnett, PhD</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Create a venv for a Jupyter kernel</h1><p class="page-description">How to quickly setup a virtual environment for use as a Jupyter kernel</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-05-22T00:00:00-05:00" itemprop="datePublished">
        May 22, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#deeplearning">deeplearning</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>After I setup my deep learning box, I installed JupyterHub following <a href="https://jupyterhub.readthedocs.io/en/stable/installation-guide-hard.html#part-1-jupyterhub-and-jupyterlab">these
instructions</a>.
I skipped the conda part myself since I like to run things in Python <code class="highlighter-rouge">venv</code>’s (virtual
environments).</p>

<p>One aspect that I struggled with in finding in the documentation was how to setup a
Python <code class="highlighter-rouge">venv</code> to be used for a Jupyter kernel. It was actually much simpler than
expected.</p>

<p>First, create a <code class="highlighter-rouge">venv</code> that will be used for the kernel:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> venv my-venv
</code></pre></div></div>

<p>Then activate that virtual environment:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ./my-venv/bin/activate
</code></pre></div></div>

<p>After that install ipykernel:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> pip <span class="nb">install </span>ipykernel
</code></pre></div></div>

<p>Lastly, register that environment as a kernel as described
<a href="https://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-different-environments">here</a>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> ipykernel <span class="nb">install</span> <span class="nt">--user</span> <span class="nt">--name</span> my-venv <span class="nt">--display-name</span> <span class="s2">"Python (my-venv)"</span>
</code></pre></div></div>

<p>That’s it! Now when you log into your JupyterHub and start a notebook, you should see it
as available.</p>

<h2 id="installing-packages">Installing packages</h2>

<p>Whenenever you want to install new packages to be available in your kernel
simply install them to your virtual environment. You can ssh into your box, activate
your venv, and run pip to install them.</p>

<p>Alternatively, you can use the <code class="highlighter-rouge">%pip</code> magic in Jupyter to run the installation. For
example, to install pandas:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>%pip <span class="nb">install </span>pandas
</code></pre></div></div>

<p>Note that this will give you different results from running <code class="highlighter-rouge">!pip</code>, which is running it
as a shell command. That won’t use the pip in the virtual environment being utilized by
the kernel like <code class="highlighter-rouge">%pip</code> will. Neither will <code class="highlighter-rouge">!python -m pip</code>. You will end up installing
your packages in the wrong location if you use the shell form.</p>

<p><img src="/images/venv.png" alt="" title="Our virtual environment is now available as a
kernel." /></p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="wesbarnett/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/deeplearning/2020/05/22/jupyter-kernel.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>© 2020 Wes Barnett</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wesbarnett" title="wesbarnett"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/wesbarnett" title="wesbarnett"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/WesBarnettPhD" title="WesBarnettPhD"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
